import {createLocalVue ,shallowMount } from '@vue/test-utils'
import ListOrders from '@/components/ListOrders.vue'
import TimeTable from '@/components/TimeTable.vue'
import OrderDetails from '@/OrderDetails.vue'
import VueRouter from 'vue-router'
import store from '@/store'
import ElementUI from 'element-ui'
import 'element-ui/lib/theme-chalk/index.css'


const localVue = createLocalVue();
localVue.use(VueRouter);
localVue.use(ElementUI);
const router = new VueRouter();
store.commit('SET_DATA', { "products": { "_embedded": { "products": [{ "id": "46297509-f50e-4b19-ba6c-bf9744414f37", "code": "PANTALON-CO-FUNZA-LAFORTUNA", "imageId": "pantalon", "name": "Pantalón", "description": "Si tu pantalón necesita la ayuda de nuestro proceso de lavado en seco, la tendrá. Aceptamos todo tipo de pantalones que requieran una ayuda para estar como nuevos.", "price": 3500, "priceBanner": "NONE", "priceType": "UNIT", "itemQuotaTracking": true, "productType": { "id": "1d20aaee-3f02-4081-90bd-19a63c79de48", "code": "DRYCLEANING", "name": "Tintorería", "description": null, "products": null, "active": null }, "productItems": [], "globalProduct": { "id": "3c26c381-d790-4d66-aee7-f72217c617d3", "code": "PANTALON", "name": "Pantalon", "description": null }, "source": { "id": "1a63dacb-59de-4d2d-818f-22e0d2b4916e", "code": "PROVIDER", "name": "Provider" }, "faqs": [], "translations": [] }, { "id": "8bf0e74b-284f-4a51-bfb1-aa5f1e0ab279", "code": "AMERICANA-CO-FUNZA-LAFORTUNA", "imageId": "americana", "name": "Saco", "description": "Ya sea para algo elegante o casual, tu blazer y tu saco merece el mejor cuidado. Nosotros lo lavamos para que esté limpio, sin manchas, ni arrugas. Por saco se entiende suéter de lana, algodón, buzo, entre otros.", "price": 3500, "priceBanner": "NONE", "priceType": "UNIT", "itemQuotaTracking": true, "productType": { "id": "1d20aaee-3f02-4081-90bd-19a63c79de48", "code": "DRYCLEANING", "name": "Tintorería", "description": null, "products": null, "active": null }, "productItems": [], "globalProduct": { "id": "b8653cf3-8d89-4ab0-b97b-7554a4ac64b1", "code": "AMERICANA", "name": "Americana", "description": null }, "source": { "id": "1a63dacb-59de-4d2d-818f-22e0d2b4916e", "code": "PROVIDER", "name": "Provider" }, "faqs": [], "translations": [] }, { "id": "b6d1f4e9-85a9-449d-a16e-cb308cbbeb35", "code": "OTRO-CO-FUNZA-LAFORTUNA-A01673C8-5E09-44FF-A28E-7EFA0CE37C76", "imageId": "others", "name": "chaqueta", "description": null, "price": 4000, "priceBanner": "NONE", "priceType": "UNIT", "itemQuotaTracking": false, "productType": { "id": "c3b3ae91-e377-40df-819d-b4edb5651569", "code": "UNCATEGORIZED", "name": "UNCATEGORIZED", "description": null, "products": null, "active": null }, "productItems": [], "globalProduct": { "id": "688ef833-806a-4fca-bf06-7563455be1d2", "code": "OTRO", "name": "Otro", "description": null }, "source": { "id": "a62a8362-83e7-4c4b-9033-0119285bfd74", "code": "ORDER", "name": "Order" }, "faqs": [], "translations": [] }, { "id": "e4a410ad-16bf-4b12-93aa-80a7af50878a", "code": "OTRO-CO-FUNZA-LAFORTUNA-25CD7CBA-3B79-4F05-8F53-ED2D9D92B0EF", "imageId": "others", "name": "chaqueta", "description": null, "price": 4000, "priceBanner": "NONE", "priceType": "UNIT", "itemQuotaTracking": false, "productType": { "id": "c3b3ae91-e377-40df-819d-b4edb5651569", "code": "UNCATEGORIZED", "name": "UNCATEGORIZED", "description": null, "products": null, "active": null }, "productItems": [], "globalProduct": { "id": "688ef833-806a-4fca-bf06-7563455be1d2", "code": "OTRO", "name": "Otro", "description": null }, "source": { "id": "a62a8362-83e7-4c4b-9033-0119285bfd74", "code": "ORDER", "name": "Order" }, "faqs": [], "translations": [] }] }, "_links": { "self": { "href": "http://product-service/api/products/search/findByIdIn?ids=b6d1f4e9-85a9-449d-a16e-cb308cbbeb35%2C46297509-f50e-4b19-ba6c-bf9744414f37%2C8bf0e74b-284f-4a51-bfb1-aa5f1e0ab279%2Ce4a410ad-16bf-4b12-93aa-80a7af50878a&projection=full&page=0&size=1000" } }, "page": { "size": 1000, "totalElements": 4, "totalPages": 1, "number": 0 } }, "orders": { "_embedded": { "orders": [{ "id": "e29f59ab-2793-4644-bec5-5818fd67a165", "code": "CO107341", "customerId": "2974d84a-d0ae-4140-bef9-64caa46cf01a", "countryCode": "CO", "orderDate": "2018-11-09", "orderStatus": { "id": "62454974-e19b-421b-a733-903134836636", "code": "DELIVERED", "name": "Entregado", "description": "Pedido entregado" }, "channel": { "id": "e179f0c8-637b-4e24-af14-9bb9dd1f5b3f", "code": "PROVIDER", "name": "Provider app", "description": "Sales from provider app" }, "billingAddressId": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "headquarterId": "ea3e3b8c-b72f-431a-9d0d-1f23c86860af", "providerId": "1ac48bec-0607-48da-a72c-0abeb05db8f1", "couponId": null, "note": null, "totalPrice": 14500, "totalDeliveryPrice": 0, "productsOrder": [{ "id": "0e4cc324-4a7b-4f24-bdad-e85127efee02", "productId": "b6d1f4e9-85a9-449d-a16e-cb308cbbeb35", "quantity": 1, "source": "order" }, { "id": "1e23806d-3436-48dd-82a7-26455f95fe4b", "productId": "46297509-f50e-4b19-ba6c-bf9744414f37", "quantity": 2, "source": "order" }, { "id": "ad3f0028-6fe8-4908-8072-65340dc3e722", "productId": "8bf0e74b-284f-4a51-bfb1-aa5f1e0ab279", "quantity": 1, "source": "order" }], "visits": [{ "id": "fe4d70df-7a7c-43dc-b45f-21c7e9ae55e1", "date": "2018-11-09", "addressId": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "visitTypeCode": "PICKUP", "timeSlotStart": "17:00:00", "timeSlotEnd": "18:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }, { "id": "01e6ebbf-99fc-443d-9cb4-a1d0714f2892", "date": "2018-11-13", "addressId": "e63495ba-7c5f-4685-9af5-d4b2a8596f84", "visitTypeCode": "DELIVERY", "timeSlotStart": "17:00:00", "timeSlotEnd": "18:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }], "statusTracking": [{ "id": "65c52194-a822-4ba1-9453-44496afc952b", "order": null, "orderStatus": { "id": "f3175aa3-17fb-4a90-879c-ee0ca1987aa1", "code": "CREATED", "name": "Pedido", "description": "Nuevo pedido" }, "creationDate": "2018-11-09" }, { "id": "54bdabef-988e-4f38-bd97-7417a0aee2e9", "order": null, "orderStatus": { "id": "181e12e5-ca22-4d60-b2af-74b2557fa445", "code": "WAITING_DELIVERY", "name": "Pendiende de entrega", "description": "Pedido en entrega" }, "creationDate": "2018-11-13" }, { "id": "ab2ca713-832f-4306-9a68-b64004758dcf", "order": null, "orderStatus": { "id": "c7cc2f91-1f5a-4e3b-8294-beac49a672fe", "code": "WAITING_PICKUP", "name": "Pendiente de recogida", "description": "Esperando recogida" }, "creationDate": "2018-11-10" }, { "id": "7cbde44c-5692-4b6f-b126-1e0d332be2f3", "order": null, "orderStatus": { "id": "a456d8fe-6fc5-46bb-8b19-b94c285d18f0", "code": "WASHED", "name": "Lavado", "description": "Finalizado proceso lavado en proveedor" }, "creationDate": "2018-11-13" }, { "id": "38751033-b562-4e80-9eaf-66a5433de7c0", "order": null, "orderStatus": { "id": "ca96832a-b7d9-4143-b67e-a383ec920a15", "code": "PICKED_UP", "name": "Recogido", "description": "Pedido recogido" }, "creationDate": "2018-11-10" }, { "id": "5bc69187-70e4-4e30-88c4-73fe026c13c8", "order": null, "orderStatus": { "id": "c39a9cbe-91b2-4de4-b5d8-873d8a20016d", "code": "WASHING", "name": "Lavando", "description": "Lavando pedido" }, "creationDate": "2018-11-13" }], "incidentSource": null, "totalOrderPriceIncrement": 0, "paymentMethodCode": "CASH", "orderType": { "name": "B2C", "code": "B2C", "description": "Pedido B2C" }, "orderRating": null, "logistics": { "id": "09d35cc2-64fb-4c39-aec9-56e3056d194e", "code": "LOCAL", "name": "Logistics in provider" }, "transactionDetails": { "paymentMethodCode": "CASH", "totalPricePaid": 14500, "totalPriceUnpaid": 0, "paymentTypeCode": "DEFERRED", "paymentStatus": "PAID" } }, { "id": "00001d25-8e01-4bcc-9f73-16515e46bc2c", "code": "CO107006", "customerId": "2974d84a-d0ae-4140-bef9-64caa46cf01a", "countryCode": "CO", "orderDate": "2018-11-07", "orderStatus": { "id": "62454974-e19b-421b-a733-903134836636", "code": "DELIVERED", "name": "Entregado", "description": "Pedido entregado" }, "channel": { "id": "e179f0c8-637b-4e24-af14-9bb9dd1f5b3f", "code": "PROVIDER", "name": "Provider app", "description": "Sales from provider app" }, "billingAddressId": "4a714f04-db46-4d9d-98f7-4930264f97fa", "headquarterId": "ea3e3b8c-b72f-431a-9d0d-1f23c86860af", "providerId": "1ac48bec-0607-48da-a72c-0abeb05db8f1", "couponId": null, "note": null, "totalPrice": 11000, "totalDeliveryPrice": 0, "productsOrder": [{ "id": "5d67eb7a-3fe4-4982-af26-a4b0aea0256e", "productId": "8bf0e74b-284f-4a51-bfb1-aa5f1e0ab279", "quantity": 2, "source": "order" }, { "id": "f237627c-b5e9-4405-b0d9-2c85d5ae8d57", "productId": "e4a410ad-16bf-4b12-93aa-80a7af50878a", "quantity": 1, "source": "order" }], "visits": [{ "id": "00fb8236-a5f7-40ea-a31b-6ca2482a1043", "date": "2018-11-07", "addressId": "4a714f04-db46-4d9d-98f7-4930264f97fa", "visitTypeCode": "PICKUP", "timeSlotStart": "15:00:00", "timeSlotEnd": "16:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }, { "id": "9107867f-b052-4263-a14a-f470706e6b61", "date": "2018-11-09", "addressId": "5983f0b1-45a5-4c22-8ca2-c3a92c7a7012", "visitTypeCode": "DELIVERY", "timeSlotStart": "15:00:00", "timeSlotEnd": "16:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }], "statusTracking": [{ "id": "b2d135e0-97ed-4dde-a0c1-a7aea07cd741", "order": null, "orderStatus": { "id": "c39a9cbe-91b2-4de4-b5d8-873d8a20016d", "code": "WASHING", "name": "Lavando", "description": "Lavando pedido" }, "creationDate": "2018-11-08" }, { "id": "8e3d8e17-4de1-43e9-9b75-7a6cd8b3db8f", "order": null, "orderStatus": { "id": "a456d8fe-6fc5-46bb-8b19-b94c285d18f0", "code": "WASHED", "name": "Lavado", "description": "Finalizado proceso lavado en proveedor" }, "creationDate": "2018-11-08" }, { "id": "0315732b-0a11-487f-b98a-2a646b8d255b", "order": null, "orderStatus": { "id": "ca96832a-b7d9-4143-b67e-a383ec920a15", "code": "PICKED_UP", "name": "Recogido", "description": "Pedido recogido" }, "creationDate": "2018-11-07" }, { "id": "fcba26c2-3f7b-47eb-bee8-a0bdaa763416", "order": null, "orderStatus": { "id": "181e12e5-ca22-4d60-b2af-74b2557fa445", "code": "WAITING_DELIVERY", "name": "Pendiende de entrega", "description": "Pedido en entrega" }, "creationDate": "2018-11-09" }, { "id": "1cd384f6-b2bf-40ab-a9bf-04dedb8a25fc", "order": null, "orderStatus": { "id": "c7cc2f91-1f5a-4e3b-8294-beac49a672fe", "code": "WAITING_PICKUP", "name": "Pendiente de recogida", "description": "Esperando recogida" }, "creationDate": "2018-11-07" }, { "id": "7ef04028-7cd3-4646-98a6-224b76f16794", "order": null, "orderStatus": { "id": "f3175aa3-17fb-4a90-879c-ee0ca1987aa1", "code": "CREATED", "name": "Pedido", "description": "Nuevo pedido" }, "creationDate": "2018-11-07" }], "incidentSource": null, "totalOrderPriceIncrement": 0, "paymentMethodCode": "CASH", "orderType": { "name": "B2C", "code": "B2C", "description": "Pedido B2C" }, "orderRating": { "id": "df3f6873-03c4-44c8-9e08-afd736ef1754", "rating": 5, "comment": "Me parece un servicio super comodo, he tenido a ir cambiando las fechas de entrega y recogida y sin nigun problema. Buen servicio, la ropa bien lavada, planchada y doblada. Todo excelente." }, "logistics": { "id": "09d35cc2-64fb-4c39-aec9-56e3056d194e", "code": "LOCAL", "name": "Logistics in provider" }, "transactionDetails": { "paymentMethodCode": "CASH", "totalPricePaid": 11000, "totalPriceUnpaid": 0, "paymentTypeCode": "UPFRONT", "paymentStatus": "PAID" } }] }, "_links": { "self": { "href": "http://order-service/api/orders/search/findByCustomerId?id=2974d84a-d0ae-4140-bef9-64caa46cf01a&projection=full&page=0&size=1000&sort=orderDate,desc" } }, "page": { "size": 1000, "totalElements": 2, "totalPages": 1, "number": 0 } }, "customers": { "_links": { "self": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a" }, "customer": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a{?projection}", "templated": true }, "customerBusinessDetails": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a/customerBusinessDetails{?projection}", "templated": true }, "addresses": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a/addresses{?projection}", "templated": true }, "customerSocialLogins": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a/customerSocialLogins" }, "customerType": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a/customerType{?projection}", "templated": true }, "customerProviders": { "href": "http://customer-service/api/customers/2974d84a-d0ae-4140-bef9-64caa46cf01a/customerProviders{?projection}", "templated": true } }, "page": null }, "addresses": { "_embedded": { "addresses": [{ "id": "4a714f04-db46-4d9d-98f7-4930264f97fa", "fullName": null, "address": "Cl. 15", "addressNumber": "#5-17", "addressDetails": "Local 1", "cityId": "7aea5272-76db-4c6e-bfab-6d7d9c9c9b29", "cityName": "Funza", "regionId": null, "countryId": null, "postalCode": "250020", "postalCodeId": null, "phoneNumber": "+5713202674183", "cityCode": "FUNZA", "countryCode": "CO", "countryName": "Colombia", "defaultPickup": null, "defaultDelivery": null, "defaultBilling": null, "email": null, "latitude": 4.708774, "longitude": -74.206436 }, { "id": "5983f0b1-45a5-4c22-8ca2-c3a92c7a7012", "fullName": null, "address": "Cl. 15", "addressNumber": "#5-17", "addressDetails": "Local 1", "cityId": "7aea5272-76db-4c6e-bfab-6d7d9c9c9b29", "cityName": "Funza", "regionId": null, "countryId": null, "postalCode": "250020", "postalCodeId": null, "phoneNumber": "+5713202674183", "cityCode": "FUNZA", "countryCode": "CO", "countryName": "Colombia", "defaultPickup": null, "defaultDelivery": null, "defaultBilling": null, "email": null, "latitude": 4.708774, "longitude": -74.206436 }, { "id": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "fullName": null, "address": "Cl. 15", "addressNumber": "#5-17", "addressDetails": "Local 1", "cityId": "7aea5272-76db-4c6e-bfab-6d7d9c9c9b29", "cityName": "Funza", "regionId": null, "countryId": null, "postalCode": "250020", "postalCodeId": null, "phoneNumber": "+5713202674183", "cityCode": "FUNZA", "countryCode": "CO", "countryName": "Colombia", "defaultPickup": null, "defaultDelivery": null, "defaultBilling": null, "email": null, "latitude": 4.708774, "longitude": -74.206436 }, { "id": "e63495ba-7c5f-4685-9af5-d4b2a8596f84", "fullName": null, "address": "Cl. 15", "addressNumber": "#5-17", "addressDetails": "Local 1", "cityId": "7aea5272-76db-4c6e-bfab-6d7d9c9c9b29", "cityName": "Funza", "regionId": null, "countryId": null, "postalCode": "250020", "postalCodeId": null, "phoneNumber": "+5713202674183", "cityCode": "FUNZA", "countryCode": "CO", "countryName": "Colombia", "defaultPickup": null, "defaultDelivery": null, "defaultBilling": null, "email": null, "latitude": 4.708774, "longitude": -74.206436 }] }, "_links": { "self": { "href": "http://order-service/api/addresses/search/findByIdIn?ids=748450e4-1118-4bf2-a9e3-a474c93f46f1%2Ce63495ba-7c5f-4685-9af5-d4b2a8596f84%2C4a714f04-db46-4d9d-98f7-4930264f97fa%2C5983f0b1-45a5-4c22-8ca2-c3a92c7a7012&page=0&size=1000" } }, "page": { "size": 1000, "totalElements": 4, "totalPages": 1, "number": 0 } }, "postalCodes": { "_links": { "self": { "href": "http://administrative-service/api/postalCodes/search/findByIdIn?ids=&projection=detail&size=2147483647" } }, "page": null }, "coupons": { "page": { "size": 0, "totalElements": 0, "totalPages": 0, "number": 0 } }, "page": { "size": 1000, "totalElements": 2, "totalPages": 1, "number": 0 } });

describe('ListOrders.vue', ()=>{
  const wrapper = shallowMount(ListOrders, {
    propsData:{
      orders:[
        { "id": "e29f59ab-2793-4644-bec5-5818fd67a165", "code": "CO107341", "customerId": "2974d84a-d0ae-4140-bef9-64caa46cf01a", "countryCode": "CO", "orderDate": "2018-11-09", "orderStatus": { "id": "62454974-e19b-421b-a733-903134836636", "code": "DELIVERED", "name": "Entregado", "description": "Pedido entregado" }, "channel": { "id": "e179f0c8-637b-4e24-af14-9bb9dd1f5b3f", "code": "PROVIDER", "name": "Provider app", "description": "Sales from provider app" }, "billingAddressId": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "headquarterId": "ea3e3b8c-b72f-431a-9d0d-1f23c86860af", "providerId": "1ac48bec-0607-48da-a72c-0abeb05db8f1", "couponId": null, "note": null, "totalPrice": 14500, "totalDeliveryPrice": 0, "productsOrder": [{ "id": "0e4cc324-4a7b-4f24-bdad-e85127efee02", "productId": "b6d1f4e9-85a9-449d-a16e-cb308cbbeb35", "quantity": 1, "source": "order" }, { "id": "1e23806d-3436-48dd-82a7-26455f95fe4b", "productId": "46297509-f50e-4b19-ba6c-bf9744414f37", "quantity": 2, "source": "order" }, { "id": "ad3f0028-6fe8-4908-8072-65340dc3e722", "productId": "8bf0e74b-284f-4a51-bfb1-aa5f1e0ab279", "quantity": 1, "source": "order" }], "visits": [{ "id": "fe4d70df-7a7c-43dc-b45f-21c7e9ae55e1", "date": "2018-11-09", "addressId": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "visitTypeCode": "PICKUP", "timeSlotStart": "17:00:00", "timeSlotEnd": "18:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }, { "id": "01e6ebbf-99fc-443d-9cb4-a1d0714f2892", "date": "2018-11-13", "addressId": "e63495ba-7c5f-4685-9af5-d4b2a8596f84", "visitTypeCode": "DELIVERY", "timeSlotStart": "17:00:00", "timeSlotEnd": "18:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }], "statusTracking": [{ "id": "65c52194-a822-4ba1-9453-44496afc952b", "order": null, "orderStatus": { "id": "f3175aa3-17fb-4a90-879c-ee0ca1987aa1", "code": "CREATED", "name": "Pedido", "description": "Nuevo pedido" }, "creationDate": "2018-11-09" }, { "id": "54bdabef-988e-4f38-bd97-7417a0aee2e9", "order": null, "orderStatus": { "id": "181e12e5-ca22-4d60-b2af-74b2557fa445", "code": "WAITING_DELIVERY", "name": "Pendiende de entrega", "description": "Pedido en entrega" }, "creationDate": "2018-11-13" }, { "id": "ab2ca713-832f-4306-9a68-b64004758dcf", "order": null, "orderStatus": { "id": "c7cc2f91-1f5a-4e3b-8294-beac49a672fe", "code": "WAITING_PICKUP", "name": "Pendiente de recogida", "description": "Esperando recogida" }, "creationDate": "2018-11-10" }, { "id": "7cbde44c-5692-4b6f-b126-1e0d332be2f3", "order": null, "orderStatus": { "id": "a456d8fe-6fc5-46bb-8b19-b94c285d18f0", "code": "WASHED", "name": "Lavado", "description": "Finalizado proceso lavado en proveedor" }, "creationDate": "2018-11-13" }, { "id": "38751033-b562-4e80-9eaf-66a5433de7c0", "order": null, "orderStatus": { "id": "ca96832a-b7d9-4143-b67e-a383ec920a15", "code": "PICKED_UP", "name": "Recogido", "description": "Pedido recogido" }, "creationDate": "2018-11-10" }, { "id": "5bc69187-70e4-4e30-88c4-73fe026c13c8", "order": null, "orderStatus": { "id": "c39a9cbe-91b2-4de4-b5d8-873d8a20016d", "code": "WASHING", "name": "Lavando", "description": "Lavando pedido" }, "creationDate": "2018-11-13" }], "incidentSource": null, "totalOrderPriceIncrement": 0, "paymentMethodCode": "CASH", "orderType": { "name": "B2C", "code": "B2C", "description": "Pedido B2C" }, "orderRating": null, "logistics": { "id": "09d35cc2-64fb-4c39-aec9-56e3056d194e", "code": "PICKUP-DELIVERY", "name": "Logistics in provider" }, "transactionDetails": { "paymentMethodCode": "CASH", "totalPricePaid": 14500, "totalPriceUnpaid": 0, "paymentTypeCode": "DEFERRED", "paymentStatus": "PAID" } }
      ]
    },
    localVue,
    router
  })
  it('Obtenemos la imagen correcta', ()=>{
    if (wrapper.vm.$props.orders[0].logistics.code =='PICKUP-DELIVERY'){
      expect(wrapper.find('img').attributes('src')).toBe('@/assets/recogida.svg');
    }else{
      expect(wrapper.find('img').attributes('src')).toBe('@/assets/recogida copy.svg');
    }
  });
  it('Comparar snapshot', () => {
    expect(wrapper.html()).toMatchSnapshot();
  });
  it('Redirección al pulsar el botón', ()=>{
    wrapper.find('button').trigger('click');
    expect(wrapper.vm.$route.path).toBe(`/orders/${wrapper.vm.$props.orders[0].id}`);
  });
  
});


describe('OrderDetails.vue', () => {
  store.dispatch("GET_DATA");
  const $route = {
    path: `/orders/${store.getters.ORDERS[0].id}`,
    params:{
      orderId: store.getters.ORDERS[0].id
    }
  } 
  let wrapper;
  beforeEach(()=>{ 
    wrapper = shallowMount(OrderDetails, {
    store,
    router,
    localVue,
    beforeCreate: function () {
      this._route = $route;
    }
  });});
  
  it('La ruta es correcta', () => {
    expect(wrapper.vm.$route.path).toBe(`/orders/${store.getters.ORDERS[0].id}`);
  });
  it('Se cargan los datos del pedido ', () => {
    expect(wrapper.vm.$route.path).toBe(`/orders/${store.getters.ORDERS[0].id}`);
  });
  it('Se cargan los productos del pedido ', () => {
    expect(wrapper.vm.products != undefined).toBe(true);
  });
  it('Redirección al pulsar el botón volver', () => {
    wrapper.find('#back-btn').trigger('click');
    expect(wrapper.vm.$route.path).toBe('/orders');
  });
  it('Se visualiza el timetable al tratar de cambiar hora', () => {
    wrapper.find('#timetable-btn').trigger('click');
    expect(wrapper.vm.$data.dialogVisitVisible).toBe(true);
  });
}); 

describe('TimeTable.vue', () => {
  const wrapper = shallowMount(TimeTable, {
    propsData: {
      order: { "id": "e29f59ab-2793-4644-bec5-5818fd67a165", "code": "CO107341", "customerId": "2974d84a-d0ae-4140-bef9-64caa46cf01a", "countryCode": "CO", "orderDate": "2018-11-09", "orderStatus": { "id": "62454974-e19b-421b-a733-903134836636", "code": "DELIVERED", "name": "Entregado", "description": "Pedido entregado" }, "channel": { "id": "e179f0c8-637b-4e24-af14-9bb9dd1f5b3f", "code": "PROVIDER", "name": "Provider app", "description": "Sales from provider app" }, "billingAddressId": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "headquarterId": "ea3e3b8c-b72f-431a-9d0d-1f23c86860af", "providerId": "1ac48bec-0607-48da-a72c-0abeb05db8f1", "couponId": null, "note": null, "totalPrice": 14500, "totalDeliveryPrice": 0, "productsOrder": [{ "id": "0e4cc324-4a7b-4f24-bdad-e85127efee02", "productId": "b6d1f4e9-85a9-449d-a16e-cb308cbbeb35", "quantity": 1, "source": "order" }, { "id": "1e23806d-3436-48dd-82a7-26455f95fe4b", "productId": "46297509-f50e-4b19-ba6c-bf9744414f37", "quantity": 2, "source": "order" }, { "id": "ad3f0028-6fe8-4908-8072-65340dc3e722", "productId": "8bf0e74b-284f-4a51-bfb1-aa5f1e0ab279", "quantity": 1, "source": "order" }], "visits": [{ "id": "fe4d70df-7a7c-43dc-b45f-21c7e9ae55e1", "date": "2018-11-09", "addressId": "748450e4-1118-4bf2-a9e3-a474c93f46f1", "visitTypeCode": "PICKUP", "timeSlotStart": "17:00:00", "timeSlotEnd": "18:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }, { "id": "01e6ebbf-99fc-443d-9cb4-a1d0714f2892", "date": "2018-11-13", "addressId": "e63495ba-7c5f-4685-9af5-d4b2a8596f84", "visitTypeCode": "DELIVERY", "timeSlotStart": "17:00:00", "timeSlotEnd": "18:00:00", "postalCodeId": null, "timeTableTimeSlotId": null, "timetableTypeCode": "OPENING" }], "statusTracking": [{ "id": "65c52194-a822-4ba1-9453-44496afc952b", "order": null, "orderStatus": { "id": "f3175aa3-17fb-4a90-879c-ee0ca1987aa1", "code": "CREATED", "name": "Pedido", "description": "Nuevo pedido" }, "creationDate": "2018-11-09" }, { "id": "54bdabef-988e-4f38-bd97-7417a0aee2e9", "order": null, "orderStatus": { "id": "181e12e5-ca22-4d60-b2af-74b2557fa445", "code": "WAITING_DELIVERY", "name": "Pendiende de entrega", "description": "Pedido en entrega" }, "creationDate": "2018-11-13" }, { "id": "ab2ca713-832f-4306-9a68-b64004758dcf", "order": null, "orderStatus": { "id": "c7cc2f91-1f5a-4e3b-8294-beac49a672fe", "code": "WAITING_PICKUP", "name": "Pendiente de recogida", "description": "Esperando recogida" }, "creationDate": "2018-11-10" }, { "id": "7cbde44c-5692-4b6f-b126-1e0d332be2f3", "order": null, "orderStatus": { "id": "a456d8fe-6fc5-46bb-8b19-b94c285d18f0", "code": "WASHED", "name": "Lavado", "description": "Finalizado proceso lavado en proveedor" }, "creationDate": "2018-11-13" }, { "id": "38751033-b562-4e80-9eaf-66a5433de7c0", "order": null, "orderStatus": { "id": "ca96832a-b7d9-4143-b67e-a383ec920a15", "code": "PICKED_UP", "name": "Recogido", "description": "Pedido recogido" }, "creationDate": "2018-11-10" }, { "id": "5bc69187-70e4-4e30-88c4-73fe026c13c8", "order": null, "orderStatus": { "id": "c39a9cbe-91b2-4de4-b5d8-873d8a20016d", "code": "WASHING", "name": "Lavando", "description": "Lavando pedido" }, "creationDate": "2018-11-13" }], "incidentSource": null, "totalOrderPriceIncrement": 0, "paymentMethodCode": "CASH", "orderType": { "name": "B2C", "code": "B2C", "description": "Pedido B2C" }, "orderRating": null, "logistics": { "id": "09d35cc2-64fb-4c39-aec9-56e3056d194e", "code": "PICKUP-DELIVERY", "name": "Logistics in provider" }, "transactionDetails": { "paymentMethodCode": "CASH", "totalPricePaid": 14500, "totalPriceUnpaid": 0, "paymentTypeCode": "DEFERRED", "paymentStatus": "PAID" } },
      visibility:true
    },
    localVue,
    store
  })
  it('Mostrar y pinchar horario de recogida', () => {
    wrapper.find('#pickup').trigger('click');
    wrapper.find('.time-table').trigger('click'); // click sobre el primer horario de recogida disponible
    expect(wrapper.vm.$data.pickupTime == wrapper.vm.$data.pickupAvailability[0].defaultTimetableTimeSlotConfigurations[0]).toBe(true); // compruebo que el horario selecionado es el primero
  });
  it('Mostrar y pinchar horario de recogida', () => {
    wrapper.find('#delivery').trigger('click');
    wrapper.find('.time-table').trigger('click'); // click sobre el primer horario de entrega disponible
    expect(wrapper.vm.$data.deliveryTime == wrapper.vm.$data.deliveryAvailability[0].defaultTimetableTimeSlotConfigurations[0]).toBe(true); // compruebo que el horario selecionado es el primero
  });
  it('No se almacena el horario al puslar cancelar', () => {
    wrapper.find('#pickup').trigger('click');
    wrapper.find('.time-table').trigger('click'); // click sobre el primer horario de recogida disponible
    wrapper.find('#delivery').trigger('click');
    wrapper.find('.time-table').trigger('click'); // click el primer primer horario de entrega disponible
    wrapper.find('#cancel').trigger('click');

    expect(wrapper.vm.$data.pickupTime.timeSlotStart != wrapper.vm.$store.getters.ORDER(wrapper.vm.$props.order.id).visits[0].timeSlotStart || wrapper.vm.$data.deliveryTime.timeSlotStart != wrapper.vm.$store.getters.ORDER(wrapper.vm.$props.order.id).visits[1].timeSlotStart).toBe(true); // compruebo que el horario pulsado es el mismo que el almacenado
  });
  it('Se almacena el nuevo horario correctamente al pulsar aceptar', () => {
    wrapper.find('#pickup').trigger('click');
    wrapper.find('.time-table').trigger('click'); // click sobre el primer horario de recogida disponible
    wrapper.find('#delivery').trigger('click');
    wrapper.find('.time-table').trigger('click'); // click el primer primer horario de entrega disponible
    wrapper.find('#update').trigger('click');

    expect(wrapper.vm.$data.pickupTime.timeSlotStart == wrapper.vm.$store.getters.ORDER(wrapper.vm.$props.order.id).visits[0].timeSlotStart && wrapper.vm.$data.deliveryTime.timeSlotStart == wrapper.vm.$store.getters.ORDER(wrapper.vm.$props.order.id).visits[1].timeSlotStart).toBe(true); // compruebo que el horario pulsado es el mismo que el almacenado
  });


});